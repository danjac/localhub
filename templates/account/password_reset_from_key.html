{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "account/base.html" %}

{% load i18n %}

{% block subtitle %} - {% trans "Change Password" %}{% endblock %}

{% block content %}
<div class="col-6 col-mx-auto col-sm-12">
  <h3>{% if token_fail %}{% trans "Bad Token" %}{% else %}{% trans "Change Password" %}{% endif %}</h3>

  {% if token_fail %}
  {% url 'account_reset_password' as passwd_reset_url %}
  <p>{% blocktrans %}The password reset link was invalid, possibly because it has already been used.  Please request a <a href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktrans %}</p>
  {% else %}
  {% if form %}
  <form method="POST" action="{{ action_url }}" class="mt-2 p-2 bg-gray">
    {% include "includes/forms/fields.html" %}
    <button type="submit" name="action" class="btn btn-primary">
      {% trans 'Change password' %}"
    </button>
  </form>
  {% else %}
  <p>{% trans 'Your password is now changed.' %}</p>
  {% endif %}
  {% endif %}
</div>
{% endblock %}

