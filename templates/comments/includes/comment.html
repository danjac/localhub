{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% load i18n %}
{% load rules %}

{% has_perm "communities.moderate_community" user community as can_moderate_community %}

<div class="card" id="comment-{{ comment.id }}">
    <div class="card-header">
        {% if comment.is_flagged and can_moderate_community %}
        <div class="toast toast-warning text-center">
            <a href="{{ comment.get_absolute_url }}">{% trans "This comment has been flagged" %}</a>
        </div>
        {% endif %}

        <div class="card-title h6 text-gray">
            {% include "activities/includes/timesince.html" with timestamp=comment.created owner=comment.owner %}

        </div>
    </div>
    <div class="card-body">
        <div class="markdown-content">
            {{ comment.content.markdown }}
        </div>
    </div>
    <div class="card-footer">
        {% if comment.num_likes and comment.owner == user %}
        <div class="mb-1 text-gray">
            {{ comment.num_likes }}
            {% blocktrans count counter=comment.num_likes %}
            person liked this comment
            {% plural %}
            people liked this comment
            {% endblocktrans %}
        </div>
        {% endif %}
        <div class="mb-1">
          <small><a href="{{ comment.get_permalink }}">{% trans "Permalink" %}</a></small>
        </div>
        {% include "comments/includes/actions.html" %}
    </div>
</div>
