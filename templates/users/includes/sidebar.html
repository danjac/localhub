{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% load i18n %}
{% load rules %}


<ul class="menu">
  {% if community %}
  <li class="menu-item">
    <a href="{% url 'activities:stream' %}">{% trans "Home" %}
    </a>
  </li>
  {% if community %}
  {% test_rule "communities.is_member" user community as is_member %}
  {% has_perm "communities.manage_community" user community as can_manage_community %}
  {% if is_member %}
  <li class="menu-item">
    <a data-controller="active-link" href="{{ user.get_absolute_url }}">{% trans "My Profile" %}</a>
  </li>
  {% endif %}

  {% if can_manage_community %}
  <li class="menu-item"><a href="{% url 'communities:community_update' %}">{% trans "Community Settings" %}</a></li>
  {% endif %}
  {% endif %}

  {% endif %}
  <li class="menu-item">
    <a data-controller="active-link" href="{% url 'user_update' %}">{% trans "Edit profile" %}</a>
  </li>
  <li class="menu-item">
    <a data-controller="active-link" href="{% url 'account_email' %}">{% trans "Email addresses" %}</a>
  </li>
  <li class="menu-item">
    <a data-controller="active-link" href="{% url 'account_change_password' %}">{% trans "Change password" %}</a>
  </li>
  <li class="menu-item">
    <a data-controller="active-link" href="{% url 'account_logout' %}">{% trans "Logout" %}</a>
  </li>

  {% if community %}
  {% test_rule "communities.is_member" user community as is_member %}
  {% if is_member %}
  <li class="menu-item">
    <a href="{% url 'communities:leave' %}">{% trans "Leave community" %}</a>
  </li>
  {% endif %}
  {% endif %}
  <li class="menu-item">
    <a data-controller="active-link" href="{% url 'user_delete' %}">{% trans "Delete account" %}</a>
  </li>
</ul>

