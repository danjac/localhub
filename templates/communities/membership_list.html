{# Copyright (c) 2019 by Dan Jacob #}
{# SPDX-License-Identifier: AGPL-3.0-or-later #}

{% extends "communities/base.html" %}

{% load i18n %}
{% load rules %}


{% block settings_content %}
<h3>{% trans "Members" %}</h3>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>{% trans "Member" %}</th>
            <th>{% trans "Status" %}</th>
            <th>{% trans "Role" %}</th>
            <th>{% trans "Actions" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for member in object_list %}
        <tr>
            <td>
              {% include "users/includes/chip.html" with profile=member.member %}
            </td>
            {% if member.active %}
            <td>{% trans "Active" %}</td>
            {% else %}
            <td class="text-gray">{% trans "Inactive" %}</td>
            {% endif %}
            <td {% if not member.active %} class="text-gray"{% endif %}>{{ member.get_role_display }}</td>
            <td>
                {% has_perm "communities.change_membership" user member as can_change %}
                {% has_perm "communities.delete_membership" user member as can_delete %}
                {% if can_change %}
                <a href="{% url 'communities:membership_update' member.id %}" class="btn btn-sm">
                    {% trans "Edit" %}
                </a>
                {% endif %}
                {% if can_delete %}
                <a href="{% url 'communities:membership_delete' member.id %}"
                   class="btn btn-sm"
                   data-controller="ajax confirm"
                   data-action="confirm#check ajax#delete"
                   data-confirm-header="{% trans 'Delete' %}"
                   data-confirm-body="{% trans 'Are you sure you want to delete this membership?' %}"
                   >{% trans "Delete" %}</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include "includes/pagination.html" %}
{% endblock settings_content %}
