{% extends "communities/base.html" %}

{% load i18n %}
{% load account %}
{% load rules %}
{% load users_tags %}

{% block content %}
{% with member=object.member %}

{% user_display member as display_name %}

<ul class="breadcrumb">
  <li class="breadcrumb-item"><a href="{% url 'communities:membership_list' %}">{% trans "Memberships" %}</a></li>
  <li class="breadcrumb-item"><a href="#">{{ display_name }}</a></li>
</ul>

<h3>{% avatar member "avatar-lg" %}{{ display_name }}</h3>

<div class="actions">

  {% if object.active %}
  <a href="{% url 'users:activities' member.username %}">{% trans "Posts" %}</a>
  <a href="{% url 'users:comments' member.username %}">{% trans "Comments" %}</a>
  {% if member != user %}
  <a href="{% url 'users:messages' member.username %}">{% trans "Messages" %}</a>
  <a href="{% url 'private_messages:message_create' member.username %}">
    {% trans "Send Message" %}
  </a>
  {% endif %}
  {% endif %}

  {% has_perm "communities.change_membership" user object as can_change %}
  {% has_perm "communities.delete_membership" user object as can_delete %}
  {% if can_change %}
  <a href="{% url 'communities:membership_update' object.id %}">
    {% trans "Edit" %}
  </a>
  {% endif %}
  {% if can_delete %}
  <a href="{% url 'communities:membership_delete' object.id %}"
     data-controller="ajax confirm"
     data-action="confirm#check ajax#delete"
     data-confirm-header="{% trans 'Delete' %}"
     data-confirm-body="{% trans 'Are you sure you want to delete this membership?' %}"
     >{% trans "Delete" %}</a>
  {% endif %}

</div>

<dl>
  <dt>{% trans "Status" %}</dt>
  <dd>{{ object.active|yesno:"Active,Inactive" }}</dd>

  <dt>{% trans "Role" %}</dt>
  <dd>{{ object.get_role_display }}</dd>

  <dt>{% trans "Joined" %}</dt>
  <dd>{{ object.created|date:"SHORT_DATE_FORMAT" }}</dd>

</dl>

{% endwith %}
{% endblock content %}
